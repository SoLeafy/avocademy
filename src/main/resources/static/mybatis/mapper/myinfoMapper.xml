<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.avocado.web.repository.MyinfoDAO">

   <select id="myinfo" resultType="MyinfoDTO" parameterType="Map">
      SELECT bno, btitle, bcontent, bdate, commentYN, comment, bdel
      FROM onlineview
      WHERE uno = #{uno} and bdel = '1' 
      ORDER BY bno DESC 
      LIMIT #{pageNo}, #{post};  
   </select>
    
    
    <select id="count" parameterType="Integer" resultType="Integer">
		select count(*) from online
		where user_no = #{uno} and bdel = "1" ;
	</select>
	

	
   <select id= "reservationList"  parameterType="String" resultType="GroupDTO">
		 SELECT
          gp.PRG_NO as prgNo,
            gp.PRG_NM as prgNm,
            gs.PRG_YMD as prgYmd,
            gs.PRG_HR as prgHr,
            gp.PRG_PLACE as prgPlace
        FROM graply ga
        JOIN grschedule gs ON ga.grsch_no = gs.GRSCH_NO
        JOIN grprograms gp ON gs.PRG_NO = gp.PRG_NO
        WHERE ga.stud_no = #{stud_no}
        GROUP BY gp.PRG_NO, gp.PRG_NM, gs.PRG_YMD, gs.PRG_HR, gp.PRG_PLACE
        ORDER BY gp.PRG_NO;

   </select>

</mapper>