<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.avocado.web.repository.OnlineDAO">
	
	<select id="online" resultType="OnlineDTO">
		SELECT bno, btitle, bcontent, bdate, secret, commentYN, bdel 
		FROM online
		WHERE bdel = "1" 
		ORDER BY bno DESC LIMIT 0, 10; 
	</select>
	
	<select id="detail" parameterType="Integer" resultType="OnlineDTO"> 
		SELECT * FROM onlineview WHERE bno = #{bno}; 
	</select>
	
	<insert id="write" parameterType="Map"> 
		INSERT INTO online
		(btitle, bcontent, user_no) VALUES (#{btitle}, #{bcontent}, (select uno from user where uname=#{uname}));
	</insert>
	
	<select id="count">
		select count(1) from online
	</select>
	
	<select id="findAll" parameterType="Map">
		select  bno, btitle, bcontent, bdate, secret, commentYN, bdel, uname 
		FROM onlineview 
		ORDER BY bno DESC LIMIT #{page},#{size}
	</select>
	
	<update id="deletecd" parameterType="String">
 		update online 
 		set bdel = '0'
  		where bno = #{bno}
	</update>
	

</mapper>